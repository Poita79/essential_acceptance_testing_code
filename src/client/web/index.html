<!DOCTYPE html>
<html>
<head>
    <title>Value your Portfolio</title>
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">
    <style>
        body {
            padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
        }
    </style>
    <script src="jquery-1.9.1.js"></script>
    <script src="bootstrap/js/bootstrap.min.js"></script>
</head>
<body>

<div class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <a class="brand" href="#">Portfolio Valuation</a>
        </div>
    </div>
</div>

<div class="container">
    <p class="lead">Amazon.com, Inc</p>

    <h2>NASDAQ: AMZN</h2>

    <div>
        <p>
            <span id="price"><strong>265.74</strong></span>
            <small>(yesterday)</small>
            <small id="movement">-9.54</small>
        </p>
    </div>

    <form id="requestValuationForm" class="form-inline">
        <legend>Your Portfolio</legend>

            <label class="control-label" for="inputNumberOfShares">Number of shares</label>
            <input id="inputNumberOfShares" type="text" placeholder="10">
            <label id="requestValuationResult" class="lead pull-right"></label>
    </form>
    <button onclick="requestValuation();" id="requestValuation" class="btn btn-primary btn-large">Request valuation</button>
    <div>
        <p style="margin-top:30px" id="requestValuationError" class="muted"></p>
    </div>
</div>

<script type="text/javascript">
$('#requestValuationForm').on('submit', function (e) {
    requestValuation();
});
</script>

<script type="text/javascript">
function requestValuation() {
    $.ajax({
        url: "http://localhost:8000/portfolio/0001",
        success: function (data) {
            var value = parseFloat(data);
            $('#requestValuationResult').html(value.toLocaleString());
        },
        error: function (XMLHttpRequest, textStatus, error) {
            console.log('Error GET portfolio/? ' + XMLHttpRequest.status + ' ' + XMLHttpRequest.responseText);
            $('#requestValuationError').html('Error: ' + XMLHttpRequest.status + ' ' + XMLHttpRequest.responseText);
        }
    });
}
</script>

</body>
</html>