<html xmlns:concordion="http://www.concordion.org/2007/concordion">
<head>
    <title>Portfolio Valuation - UI Transport test</title>
    <link rel="stylesheet" href="../../../../concordion.css" type="text/css"/>
    <link rel="stylesheet" href="../../../../style.css" type="text/css"/>
    <script src="../../../../jquery-1.9.1.js">.</script>
    <script type="text/javascript" src="../../../../specifications.js">.</script>
</head>
<body onload="toggleImplementationNotes(); toggleDetails();">
<h1>Portfolio Valuation </h1>
<h2>UI Transport Test <img style="cursor:pointer" onclick="toggleImplementationNotes();" src="../../../../info.jpg" width="18px" height="18px" alt="Implementations notes" name="Toggle details"/></h2>

<div class="implementation-notes">
    <div class="information">
        <h3>Implementation notes</h3>

        <p>
            When the UI asks for a valuations, a specific message is sent over the wire. The response format is also
            exercised but how that value is actually used is is left to another test. For example, if the request is
            sent as JSON, the JSON content may be verified. The response body may be verified against a specific JSON
            format and the HTTP response code verified to be 200 (OK).
        </p>
        <p>
            <img src="ui-transport-test.png" width="400px" height="140px" border="1px"/>
        </p>
        <p>
            <ul>
                <li>The UI is exercised (however, in our case, the server is <b>not</b> started</li>
            </ul>
        </p>
    </div>
</div>

<h2>When</h2>

<p concordion:execute="#url = requestPortfolioValue()">
    When the UI asks for the current portfolio valuation
</p>

<h2>Then</h2>

<p>
    A <b concordion:assertEquals="verifyHttpGet()">request for the portfolio value is made</b> to the application  <span class="more-details">[<a href="#" onclick="toggleDetails();">details</a>]</span>
</p>

<div class="details">
    <p>
        A HTTP <code>GET</code> request is made to the system on the URL
    </p>
    <div class="example">
        <pre concordion:echo="#url"></pre>
    </div>
</div>

<p>
    and a valid the response <b>is received</b> and <a href="PortfolioUi.html">displayed in the UI</a> <span class="more-details">[<a href="#" onclick="toggleDetails();">details</a>]</span>
</p>

<div class="details">
    <div class="example">
        <p>
            The full response message looked like this
        </p>
        <pre>
HTTP/1.1 200 OK
Content-type: */*; charset="UTF-8"
Content-length: 1
Date: Sun, 24 Mar 2013 07:20:30 UTC

104550
        </pre>
    </div>
</div>

<div class="information">
    <h3>Further information</h3>
    <ul>
        <li><a href="index.html">Overview</a></li>
    </ul>
</div>

</body>
</html>